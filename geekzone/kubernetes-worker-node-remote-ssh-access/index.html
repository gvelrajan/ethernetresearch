<!doctype html><html lang=en><head><title>Kubernetes Worker Node Remote SSH Access - Ethernet Research</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Ethernet Research: Actionable information about cloud technologies at your fingertips"><meta name=author content="Ganesh Velrajan"><meta property="og:title" content="Kubernetes Worker Node Remote SSH Access"><meta property="og:description" content="Kubernetes is a very popular and widely deployed container management and orchestration platform, preferred by devops engineers worldwide today.
Usually Kubernetes clusters and their worker nodes are not exposed to the public Internet but the apps running in them are."><meta property="og:type" content="article"><meta property="og:url" content="https://gvelrajan.github.io/ethernetresearch/geekzone/kubernetes-worker-node-remote-ssh-access/"><meta property="og:image" content="https://gvelrajan.github.io/images/kubernetes/kubernetes.jpg"><meta property="article:published_time" content="2020-10-29T00:00:00+00:00"><meta property="article:modified_time" content="2020-10-29T00:00:00+00:00"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://gvelrajan.github.io/images/kubernetes/kubernetes.jpg"><meta name=twitter:title content="Kubernetes Worker Node Remote SSH Access"><meta name=twitter:description content="Kubernetes is a very popular and widely deployed container management and orchestration platform, preferred by devops engineers worldwide today.
Usually Kubernetes clusters and their worker nodes are not exposed to the public Internet but the apps running in them are."><meta name=generator content="Hugo 0.79.1"><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.min.css integrity="sha256-l85OmPOjvil/SOvVt3HnSSjzF1TUMyT9eV0c2BzEGzU=" crossorigin=anonymous><link rel=stylesheet href=https://gvelrajan.github.io/ethernetresearch/fontawesome/css/all.min.css><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto+Slab|Ruda"><link rel=stylesheet type=text/css href=https://gvelrajan.github.io/ethernetresearch/css/styles.css></head><body><div id=container><header><h1><a href=https://gvelrajan.github.io/ethernetresearch/>Ethernet Research</a></h1><ul id=social-media><li><a href=https://linkedin.com/in/username title=LinkedIn><i class="fab fa-linkedin fa-lg"></i></a></li><li><a href=https://www.youtube.com/channel/UCnmHCstjZcevizOQ0qmANlw title=Youtube><i class="fab fa-youtube fa-lg"></i></a></li></ul><p><em>Actionable information about cloud technologies</em></p></header><nav><ul><li><a href=https://gvelrajan.github.io/ethernetresearch/geekzone/><i class="fa-li fa fa-lg"></i><span>GeekZone</span></a></li><li><a href=https://gvelrajan.github.io/ethernetresearch/articles/><i class="fa-li fa fa-lg"></i><span>Articles</span></a></li><li><a href=https://gvelrajan.github.io/ethernetresearch/about/><i class="fa-li fa fa-lg"></i><span>About Us</span></a></li><li><a href=https://gvelrajan.github.io/ethernetresearch/online-courses-training/><i class="fa-li fa fa-lg"></i><span>Online Courses</span></a></li><li><a href=https://gvelrajan.github.io/ethernetresearch/contact/><i class="fa-li fa fa-lg"></i><span>Contact</span></a></li></ul></nav><main><article><h1>Kubernetes Worker Node Remote SSH Access</h1><aside><ul><li><time class=post-date datetime=2020-10-29T00:00:00Z>Oct 29, 2020</time></li><li>Categories:
<em><a href=https://gvelrajan.github.io/ethernetresearch/categories/geekzone>GeekZone</a>
,
<a href=https://gvelrajan.github.io/ethernetresearch/categories/kubernetes>Kubernetes</a></em></li><li><em><a href=https://gvelrajan.github.io/ethernetresearch/tags/container>#Container</a>
,
<a href=https://gvelrajan.github.io/ethernetresearch/tags/docker>#Docker</a>
,
<a href=https://gvelrajan.github.io/ethernetresearch/tags/kubernetes>#Kubernetes</a>
,
<a href=https://gvelrajan.github.io/ethernetresearch/tags/pod>#Pod</a>
,
<a href=https://gvelrajan.github.io/ethernetresearch/tags/remote-access>#Remote Access</a></em></li><li>4 minute read</li></ul></aside><div class=featured_image><a href=https://gvelrajan.github.io/ethernetresearch/geekzone/kubernetes-worker-node-remote-ssh-access/ title="Kubernetes Worker Node Remote SSH Access"><img src=https://gvelrajan.github.io/ethernetresearch/images/kubernetes/kubernetes.jpg></a></div><p>Kubernetes is a very popular and widely deployed container management and orchestration platform, preferred by devops engineers worldwide today.</p><p>Usually Kubernetes clusters and their worker nodes are not exposed to the public Internet but the apps running in them are.</p><p>SocketXP TLS VPN solution is a lightweight VPN that provides secure remote SSH access to private Kubernetes Clusters in your on-prem cloud or public cloud or multi-cloud or hybrid cloud.</p><p>::: tip Note:
We at SocketXP are looking for beta customers to evaluate and provide feedback for our Kubernetes Remote Access Solution. Please feel free to reach out to us at: <a href=mailto:support@socketxp.com>support@socketxp.com</a>
:::</p><h2 id=overall-strategy----in-a-nutshell>Overall Strategy &ndash; In a nutshell</h2><p>We&rsquo;ll install SocketXP agent in your worker nodes and configure it to function as an SSH server. SocketXP agent will also establish a secure TLS VPN connection with the SocketXP Cloud Gateway. You could then, remote SSH into your Kubernetes worker nodes from the SocketXP Cloud Gateway Portal using your browser. No SSH client is required to SSH into your worker nodes.</p><p>Let&rsquo;s get started!</p><h3 id=step-1--download-and-install>Step 1: Download and Install</h3><p><a href=https://www.socketxp.com/download/>Download and install</a> the SocketXP agent on your Kubernetes Worker Node.</p><h3 id=step-2-get-your-authentication-token>Step 2: Get your Authentication Token</h3><p>Sign up at <a href=https://portal.socketxp.com>https://portal.socketxp.com</a> and get your authentication token.</p><p><img src=https://dev-to-uploads.s3.amazonaws.com/i/8h8dtakf5nl1c85kem9z.jpg alt="SocketXP AuthToken"></p><p>Use the following command to authenticate you node with the SocketXP Cloud Gateway using the auth token.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ socketxp login &lt;your-auth-token-goes-here&gt;
</code></pre></div><h3 id=step-3-create-socketxp-tls-vpn-tunnel-for-remote-ssh-access>Step 3: Create SocketXP TLS VPN Tunnel for Remote SSH Access</h3><p>Use the following command to create a secure and private TLS tunnel VPN connection to the SocketXP Cloud Gateway.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ socketxp connect tcp://localhost:22  --iot-device-id <span style=color:#e6db74>&#34;kube-worker-node-001&#34;</span>  --enable-ssh --ssh-username <span style=color:#e6db74>&#34;test-user&#34;</span> --ssh-password <span style=color:#e6db74>&#34;password123&#34;</span>

TCP tunnel <span style=color:#f92672>[</span>test-user-gmail-com-34445<span style=color:#f92672>]</span> created.
Access the tunnel using SocketXP agent in IoT Slave Mode
</code></pre></div><p>Where TCP port 22 is the default port at which the SocketXP agent would listen for SSH connections from any SSH clients. The &ldquo;&ndash;iot-device-id&rdquo; represents a unique identifier assigned to the Kubernetes worker node within your organization. It could be any string value but it must be unique for each of your worker node.</p><p>::: warning Security Info:
SocketXP does not create any public TCP tunnel endpoints that can be connected and accessed by anyone in the internet using an SSH client. SocketXP TCP tunnel endpoints are not exposed to the internet and can be accessed only using the SocketXP agent (using the auth token of the user) or through the XTERM terminal in the SocketXP Portal page.</p><p>SocketXP also has the option to setup and use your private/public keys to remote SSH into your worker nodes.
:::</p><p>You could now remote SSH into your Kubernetes worker node by clicking the terminal icon as shown in the screenshot below.</p><p><img src=https://dev-to-uploads.s3.amazonaws.com/i/bnlax2jo0tb5v0s5kta1.png alt="SSH Kubernetes Worker Node"></p><p>Next, you&rsquo;ll will be prompted to provide your SSH login and password.</p><p>Once your credentials are authenticated with your SSH server you&rsquo;ll be logged into your device&rsquo;s shell prompt.</p><p>The screen capture below shows the &ldquo;htop&rdquo; shell command output from an SSH session created using the XTERM window in the SocketXP Portal page.</p><p><img src=https://dev-to-uploads.s3.amazonaws.com/i/tcg50e43i1dbnleqyka1.jpg alt="SSH Kubernetes Worker Node"></p><h2 id=configuring-socketxp-agent-to-run-in-slave-mode>Configuring SocketXP agent to run in slave mode</h2><p>This is an alternate method for SSH into your private worker node from a remote location using the SocketXP Remote SSH Access solution.</p><p>If you don&rsquo;t want to access your worker node using a browser(via SocketXP Portal) and you want to access it using an SSH client (such as PuTTy) installed on your laptop or desktop, follow the instructions below.</p><p>First download and install the regular SocketXP agent software on your access device (such as a laptop running Windows or Mac OS). Next, configure the agent to run in slave mode using the command option &ldquo;&ndash;iot-slave&rdquo; as shown in the example below. Also, specify the name of the private TCP tunnel you want to connect to, using the <code>--tunnel-name</code> option.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ socketxp connect tcp://localhost:3000 --iot-slave --tunnel-name test-user-gmail-com-34445

Listening <span style=color:#66d9ef>for</span> TCP connections at:
Local URL -&gt; tcp://localhost:3000
Accessing the IoT device from your laptop
</code></pre></div><p>::: tip Why this is important?
SocketXP IoT Agent when run in Slave Mode acts like a localproxy server. It proxies all connections to a user-specified local port (10111 in the example above) in your laptop/PC to the SocketXP Cloud Gateway using a secure SSL/TLS tunnel. Also the SocketXP Agent authenticates itself with the SocketXP Cloud Gateway using your auth token. This ensures that only legitimate, authenticated users are permitted to access your private worker nodes. SocketXP ensures Zero-Trust security on all connected devices.
:::</p><p>Now you can SSH access your Kubernetes Worker Node using the above SocketXP local endpoint, as shown below.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ ssh -i ~/.ssh/test-user-private.key test-user@localhost -p <span style=color:#ae81ff>3000</span>
</code></pre></div><p>::: tip Tip:
You can also use <a href=https://www.putty.org/>PuTTY</a> SSH client to remote SSH into your device using the same parameters show above. Similarly, you can use PuTTY or <a href=https://filezilla-project.org/>FileZilla</a> to perform SFTP actions such as file upload and file download to your private Kubernetes Worker Nodes.
:::</p><p>::: tip Want to be a Beta customer?:
We at SocketXP are looking for Beta customers to evaluate and provide feedback for our Kubernetes Remote Access Solution that includes Worker Node/Pod SSH access/Microservice Remote Access/Database Remote access. Please feel free to connect with us at: <a href=support@socketxp.com>support@socketxp.com</a>
:::</p></article><section class=post-nav><ul><li><a href=https://gvelrajan.github.io/ethernetresearch/geekzone/autoupdate-kubernetes-deployment-github-webhook/><i class="fa fa-chevron-circle-left"></i>Autoupdate Kubernetes Deployment on GitHub Webhook</a></li><li><a href=https://gvelrajan.github.io/ethernetresearch/geekzone/kubernetes-pod-remote-ssh-access/>Kubernetes Pod Remote SSH Access <i class="fa fa-chevron-circle-right"></i></a></li></ul></section></main><footer><h6>Copyright Â© 2021 - Ethernet Research | All Rights Reserved.</h6></footer></div><script src=https://gvelrajan.github.io/ethernetresearch/js/scripts.js></script></body></html>